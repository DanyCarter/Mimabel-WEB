import{q as w,y as x,z as C,A as P,B as N,u as k,s as I,C as q,r as U,o as n,a as d,e as o,w as u,h as j,b as l,k as g,d as i}from"./index-BytxeJEz.js";import{u as B}from"./useImage-DYDv_h_b.js";const D={class:"mt-10"},E=l("h1",{class:"text-4xl my-10 font-extrabold"},"Editar Producto",-1),F={class:"flex justify-center bg-white shadow"},M={class:"mx-auto mt-10 p-10 w-full 2xl:w-2/4"},O={key:0},R=l("p",{class:"font-black"},"Imagen Nueva:",-1),A=["src"],G={key:1},K=l("p",{class:"font-black"},"Imagen Actual:",-1),S=["src","alt"],T={__name:"EditProductView",setup(z){const m=w(),_=x(),f=C(),c=P(f,"products",_.params.id),y=N(c),{onFileChange:v,url:p,isImageUploaded:h}=B(),b=k(),e=I({name:"",category:"",price:"",availability:"",image:""});q(y,r=>{r||m.push({name:"products"}),Object.assign(e,r)});const V=async r=>{try{await b.updateProduct(c,{...r,url:p}),m.push({name:"products"})}catch(a){console.log(a)}};return(r,a)=>{const t=U("FormKit");return n(),d("div",D,[o(j,{to:"products"},{default:u(()=>[g(" Volver ")]),_:1}),E,l("div",F,[l("div",M,[o(t,{type:"form",value:e,"submit-label":"Guardar Cambios","incomplete-message":"No se pudo enviar, revisa los mensajes",onSubmit:V,actions:!1},{default:u(()=>[o(t,{type:"text",label:"Nombre",name:"name",placeholder:"Nombre de Producto",validation:"required",modelValue:e.name,"onUpdate:modelValue":a[0]||(a[0]=s=>e.name=s),modelModifiers:{trim:!0},"validation-messages":{required:"El Nombre del Producto es Obligatorio"}},null,8,["modelValue"]),o(t,{type:"select",label:"Categoría",name:"category",validation:"required",modelValue:e.category,"onUpdate:modelValue":a[1]||(a[1]=s=>e.category=s),modelModifiers:{number:!0},"validation-messages":{required:"La Categoría es Obligatoria"},options:i(b).categoryOptions},null,8,["modelValue","options"]),o(t,{type:"number",label:"Precio",name:"price",placeholder:"Precio de Producto",step:"1",min:"1",modelValue:e.price,"onUpdate:modelValue":a[2]||(a[2]=s=>e.price=s),modelModifiers:{number:!0}},null,8,["modelValue"]),o(t,{type:"number",label:"Disponibles",name:"availability",placeholder:"Productos Disponibles",modelValue:e.availability,"onUpdate:modelValue":a[3]||(a[3]=s=>e.availability=s),modelModifiers:{number:!0},step:"1",min:"0"},null,8,["modelValue"]),i(h)?(n(),d("div",O,[R,l("img",{src:i(p),alt:"Nueva imagen Producto",class:"w-52"},null,8,A)])):(n(),d("div",G,[K,l("img",{src:e.image,alt:"Imagen de"+e.image,class:"w-52"},null,8,S)])),o(t,{type:"file",label:"Cambiar Imagen",name:"image",multiple:"false",accept:".jpg",onChange:i(v)},null,8,["onChange"]),o(t,{type:"submit"},{default:u(()=>[g("Guardar Cambios")]),_:1})]),_:1},8,["value"])])])])}}};export{T as default};
