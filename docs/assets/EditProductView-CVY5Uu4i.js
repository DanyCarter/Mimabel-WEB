import{j as w,m as x,p as P,q as C,s as N,u as k,k as I,v as j,r as q,a as n,e as o,w as d,_ as U,b as l,o as u,h as g,d as i}from"./index-D2aitIVI.js";import{u as D}from"./useImage-2MYf_rlT.js";const E={class:"mt-10"},F=l("h1",{class:"text-4xl my-10 font-extrabold"},"Editar Producto",-1),M={class:"flex justify-center bg-white shadow"},O={class:"mx-auto mt-10 p-10 w-full 2xl:w-2/4"},B={key:0},R=l("p",{class:"font-black"},"Imagen Nueva:",-1),G=["src"],K={key:1},S=l("p",{class:"font-black"},"Imagen Actual:",-1),A=["src","alt"],$={__name:"EditProductView",setup(H){const m=w(),_=x(),f=P(),c=C(f,"products",_.params.id),v=N(c),{onFileChange:y,url:p,isImageUploaded:h}=D(),b=k(),e=I({name:"",category:"",price:"",availability:"",image:""});j(v,r=>{r||m.push({name:"products"}),Object.assign(e,r)});const V=async r=>{try{await b.updateProduct(c,{...r,url:p}),m.push({name:"products"})}catch(a){console.log(a)}};return(r,a)=>{const t=q("FormKit");return u(),n("div",E,[o(U,{to:"products"},{default:d(()=>[g(" Volver ")]),_:1}),F,l("div",M,[l("div",O,[o(t,{type:"form",value:e,"submit-label":"Guardar Cambios","incomplete-message":"No se pudo enviar, revisa los mensajes",onSubmit:V,actions:!1},{default:d(()=>[o(t,{type:"text",label:"Nombre",name:"name",placeholder:"Nombre de Producto",validation:"required",modelValue:e.name,"onUpdate:modelValue":a[0]||(a[0]=s=>e.name=s),modelModifiers:{trim:!0},"validation-messages":{required:"El Nombre del Producto es Obligatorio"}},null,8,["modelValue"]),o(t,{type:"select",label:"Categoría",name:"category",validation:"required",modelValue:e.category,"onUpdate:modelValue":a[1]||(a[1]=s=>e.category=s),modelModifiers:{number:!0},"validation-messages":{required:"La Categoría es Obligatoria"},options:i(b).categoryOptions},null,8,["modelValue","options"]),o(t,{type:"number",label:"Precio",name:"price",placeholder:"Precio de Producto",step:"1",min:"1",modelValue:e.price,"onUpdate:modelValue":a[2]||(a[2]=s=>e.price=s),modelModifiers:{number:!0}},null,8,["modelValue"]),o(t,{type:"number",label:"Disponibles",name:"availability",placeholder:"Productos Disponibles",modelValue:e.availability,"onUpdate:modelValue":a[3]||(a[3]=s=>e.availability=s),modelModifiers:{number:!0},step:"1",min:"0"},null,8,["modelValue"]),i(h)?(u(),n("div",B,[R,l("img",{src:i(p),alt:"Nueva imagen Producto",class:"w-52"},null,8,G)])):(u(),n("div",K,[S,l("img",{src:e.image,alt:"Imagen de"+e.image,class:"w-52"},null,8,A)])),o(t,{type:"file",label:"Cambiar Imagen",name:"image",multiple:"false",accept:".jpg",onChange:i(y)},null,8,["onChange"]),o(t,{type:"submit"},{default:d(()=>[g("Guardar Cambios")]),_:1})]),_:1},8,["value"])])])])}}};export{$ as default};
